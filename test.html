<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Realization Module</title>
    <script src="https://cdn.jsdelivr.net/npm/jsog@1.0.7/lib/JSOG.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        .hidden { display: none; }
        h1, h2, h3 { color: #ff00fb; }
        button { cursor: pointer; background-color: #4CAF50; color: white; border: none; padding: 10px 15px; }
        button:hover { background-color: #45a049; }
/* General body styling */
body {
    background-color: #000; /* Black background */
    color: #00FF00; /* Bright green text */
    font-family: 'Courier New', Courier, monospace; /* Monospace font for that terminal look */
    font-size: 16px; /* Slightly larger text */
    line-height: 1.5;
    margin: 0;
    padding: 20px;
}

/* Links */
a {
    color: #00FF00; /* Green links */
    text-decoration: none;
}

a:hover {
    text-decoration: underline; /* Underline on hover to show interactability */
}

/* Terminal window styling */
.terminal {
    background-color: #111; /* Darker black for terminal window */
    padding: 20px;
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(0, 255, 0, 0.5); /* Green glowing effect */
    border: 1px solid #00FF00; /* Green border */
}

/* Input fields */
input, select, button {
    background-color: #222; /* Slightly lighter black for input fields */
    color: #00FF00; /* Green text */
    border: 1px solid #00FF00; /* Green border */
    padding: 5px;
    border-radius: 3px;
    font-family: 'Courier New', Courier, monospace;
}

input::placeholder {
    color: #009900; /* Darker green for placeholder text */
}

button {
    cursor: pointer; /* Pointer cursor for buttons */
    transition: background-color 0.2s, color 0.2s;
}

button:hover {
    background-color: #00FF00; /* Invert colors on hover */
    color: #000;
}

/* Table styling */
table {
    width: 100%;
    border-collapse: collapse;
}

th, td {
    border: 1px solid #00FF00; /* Green borders for table cells */
    padding: 10px;
    text-align: left;
}

th {
    background-color: #111; /* Darker background for table header */
}

td {
    background-color: #000; /* Black background for table cells */
}

/* Custom scrollbar */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background-color: #111;
}

::-webkit-scrollbar-thumb {
    background-color: #00FF00;
    border-radius: 4px;
}

/* Terminal blinking cursor */
@keyframes blink {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0;
    }
}

.cursor {
    display: inline-block;
    width: 10px;
    background-color: #00FF00;
    animation: blink 1s step-end infinite;
}

/* Terminal lines */
.terminal-line {
    margin-bottom: 10px;
}


#orgList {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); /* Grid layout for org cards */
    gap: 15px;
    margin-top: 20px;
}

.card-container {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  margin-top: 20px;
}

.org-card .card .player-card .goal-card {
    background-color: #222;
    border: 1px solid #00FF00;
    border-radius: 8px;
    padding: 15px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.org-card h3 {
    margin-top: 0;
    font-size: 1.2em;
    color: #00FF00;
}

.org-card p {
    margin: 5px 0;
    color: #00FF00;
    font-size: 0.9em;
}

.org-card button {
    display: block;
    width: 100%;
    background-color: #111;
    color: #00FF00;
    border: none;
    padding: 10px;
    border-radius: 5px;
    margin-top: 10px;
    transition: background-color 0.3s ease;
}

.org-card button:hover {
    background-color: #2f2f2f;
}

.org-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
}

#orgDetailView {
    background-color: #222;
    border-radius: 10px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    padding: 20px;
    margin-top: 20px;
}

#orgDetailName {
    color: #00FF00;
    font-size: 24px;
    margin-bottom: 15px;
    border-bottom: 2px solid #00FF00;
    padding-bottom: 10px;
}

#orgDetailInfo {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
}

#orgDetailInfo p {
    margin: 0;
    padding: 10px;
    background-color: #2f2f2f;
    border-radius: 5px;
    font-size: 14px;
    color: #00FF00;
}

#orgDetailInfo h4 {
    grid-column: 1 / -1;
    color: #00FF00;
    margin-top: 20px;
    margin-bottom: 10px;
    font-size: 18px;
}

#orgDetailInfo ul {
    grid-column: 1 / -1;
    list-style-type: none;
    padding: 0;
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

#orgDetailInfo li {
    background-color: #2f2f2f;
    padding: 5px 10px;
    border-radius: 15px;
    font-size: 12px;
    color: #00FF00;
}

/* Additional UI Elements */
#message, #error {
    padding: 10px;
    margin: 10px 0;
    border-radius: 5px;
}

#message {
    background-color: #d4edda;
    color: #155724;
}

#error {
    background-color: #f8d7da;
    color: #721c24;
}


.hidden { 
    display: none; 
}

section { 
    background-color: #f9f9f9; 
    padding: 15px; 
    margin: 15px 0; 
    border-radius: 5px; 
    border: 1px solid #ddd;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

    </style>
</head>
<body>
    <div class="terminal">
        <div class="terminal-line">Social Realization Module</div>
        <input type="text" id="apiKey" placeholder="Enter API Key">
        <button id="loginBtn">Log In</button>
        <br>
        <br>
        <input type="text" id="playerName" placeholder="Enter Name">
        <button id="registerBtn">Register</button>
        <div class="cursor"></div>
    </div>
    <div id="message" class="hidden"></div>
    <div id="error" class="hidden"></div>


    <div id="message" class="hidden"></div>
    <div id="error" class="hidden"></div>
    <div id="orgList" class="hidden"></div>

    <div id="orgDetailView" class="hidden">
        <h2 id="orgDetailName"></h2>
        <div id="orgDetailInfo"></div>
        <div id="currentPhaseActions"></div>
    </div>

    <div id="orgCardContainer"></div>

    <div id="playerCards" class="card-container"></div>
    <div id="goalCards" class="card-container"></div>

    <div id="leaderboards" class="section hidden"></div>

    <div id="orgManagement" class="section hidden">
        <h2>Organization Management</h2>
        <!-- Organization management actions will be dynamically inserted here -->
    </div>

    <script>
        // Function to create phase action buttons
        function createPhaseActionButton(id, title, buttonText) {
            return `
                <div class="phase-${id}">
                    <div id="${id}">
                        <h3>${title}</h3>
                        <button>${buttonText}</button>
                    </div>
                </div>
            `;
        }

        // Function to create organization management actions
        function createOrgManagementAction(id, title, buttonText) {
            return `
                <div id="${id}">
                    <h3>${title}</h3>
                    <button>${buttonText}</button>
                </div>
            `;
        }

        // Function to create card containers
        function createCardContainer(id) {
            return `<div id="${id}" class="card-container"></div>`;
        }

        // Function to create leaderboard section
        function createLeaderboardSection() {
            return `
                <h2>Get Leaderboards</h2>
                <p>Goal Leaderboard</p>
                <p>Offer Leaderboard</p>
                <p>Potential Value Realized Value</p>
                <button>Get Leaderboard</button>
                <div id="leaderboardResult"></div>
            `;
        }

        // Function to create organization card
        function createOrgCard() {
            return `
                <div class="org-card">
                    <h3 class="org-name"></h3>
                    <p>ID: <span class="org-id"></span></p>
                    <p>Current Cycle: <span class="org-cycle"></span></p>
                    <p>Current Phase: <span class="org-phase"></span></p>
                    <div class="phase-form"></div>
                    <button>Join</button>
                </div>
            `;
        }

        // Populate phase actions
        const phaseActions = [
            { id: 'proposeGoal', title: 'Propose Goal', buttonText: 'Propose Goal' },
            { id: 'allocateToGoal', title: 'Allocate to Goal', buttonText: 'Allocate to Goal' },
            { id: 'makeOffer', title: 'Make Offer', buttonText: 'Make Offer' },
            { id: 'allocateToOffer', title: 'Allocate to Offer', buttonText: 'Allocate to Offer' },
            { id: 'claimCompletion', title: 'Claim Completion', buttonText: 'Claim Completion' },
            { id: 'challengeCompletion', title: 'Challenge Completion', buttonText: 'Challenge Completion' }
        ];

        const actionButtons = phaseActions.map(action => 
            createPhaseActionButton(action.id, action.title, action.buttonText)
        ).join('');

        document.getElementById('currentPhaseActions').innerHTML = actionButtons;

        // Populate organization management actions
        const orgManagementActions = [
            { id: 'createOrg', title: 'Create Organization', buttonText: 'Create Org' },
            { id: 'issueShares', title: 'Issue Shares', buttonText: 'Issue Shares' },
            { id: 'distributeShares', title: 'Distribute Shares', buttonText: 'Distribute Shares' },
            { id: 'runPhaseShift', title: 'Run Phase Shift', buttonText: 'Run Phase Shift' },
            { id: 'acceptOffer', title: 'Accept Offer', buttonText: 'Accept Offer' }
        ];

        const orgManagementButtons = orgManagementActions.map(action => 
            createOrgManagementAction(action.id, action.title, action.buttonText)
        ).join('');

        document.getElementById('orgManagement').innerHTML += orgManagementButtons;

        // Create leaderboard section
        document.getElementById('leaderboards').innerHTML = createLeaderboardSection();

        // Create organization card
        document.getElementById('orgCardContainer').innerHTML = createOrgCard();

        // Add event listeners and other necessary JavaScript for interactivity
        // This is where you would add code to handle button clicks, form submissions, etc.
        // For example:
        document.getElementById('loginBtn').addEventListener('click', function() {
            apiKey = $('#apiKey').val();
            $.post('http://localhost:3000/login', { apiKey: apiKey }, function(data) {
                if (data.success) {
                    console.log(data.playerId)
                    playerId = data.playerId;
                    setMessage('Login successfully. playerID: ' + playerId);
                    $('#terminal').hide();
                    fetchOrgRegistry()
                } else {
                    showError('Login failed: ' + data.error);
                }
            });
        });

        document.getElementById('registerBtn').addEventListener('click', function() {
            const playerName = $('#playerName').val();
            $.post('http://localhost:3000/register', { playerName: playerName }, function(data) {
                if (data.success) {
                    playerId = data.playerId;
                    apiKey = data.apiKey;
                    setMessage('Registered successfully. API Key: ' + apiKey);
                    $('#terminal').hide();
                    fetchOrgRegistry()
                } else {
                    showError('Registration failed: ' + data.error);
                }
            });
        });

        // Add more event listeners and logic as needed
    </script>
</body>
</html>